malware_scan() { #should be fed $progress. scans a single user $1 for malware quietly. uses custom lw binary instead of php-based amwscan for global pullsync version
	local user=$1
	ec brown "$progress Scanning php files for malware on $user..."
	while read -r path; do
		php /root/migration_malware_scan "$path" --report --path-report "$dir/logs/$user.scan" --report-format txt --silent &> /dev/null
		echo "$path" >> "$dir/logs/$user.scan"
	done < <(awk -F== '/ '"$user"'==/ {print $5}' /etc/userdatadomains | sort -u)
	if grep -q "^File" "$dir/logs/$user.scan"; then
		echo "$user" >> /root/dirty_accounts.txt
	fi
}
